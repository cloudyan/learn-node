# 流: 最强大和最容易误解的功能

关于此章节，你会想到哪些，你想了解哪些？

- 流是为了解决什么问题的？
- 什么时候使用这个？如何使用？
- 有什么使用场景、使用案例？

因为在在node中读取文件的方式有来两种，
一个是利用fs模块，
一个是利用流来读取。

如果读取小文件，我们可以使用fs读取，fs读取文件的时候，是将文件一次性读取到本地内存。
而如果读取一个大文件，一次性读取会占用大量内存，效率很低，这个时候需要用流来读取。

流是将数据分割段，一段一段的读取，可以控制速率，效率很高，不会占用太大的内存。
gulp 的 task 任务，文件压缩，和http中的请求和响应等功能的实现都是基于流来实现的。

## 可读流用法

- node中读是将内容读取到内存中，而内存就是Buffer对象
- 流都是基于原生的fs操作文件的方法来实现的，通过fs创建流。所有的 Stream 对象都是 EventEmitter 的实例，内部是通过发布订阅模式实现的。常用的事件有：
- open -打开文件
- data -当有数据可读时触发。
- error -在读收和写入过程中发生错误时触发。
- close -关闭文件
- end - 没有更多的数据可读时触发
